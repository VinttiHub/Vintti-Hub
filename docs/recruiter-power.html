<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Recruiter Metrics ‚Ä¢ Vintti Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fuente Onest -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Onest:wght@400;600;700;800&display=swap"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="./assets/css/recruiter-power.css" />
  <style>
    .metric-card[data-metric-detail] {
      cursor: pointer;
      transition: box-shadow 0.25s ease, transform 0.25s ease;
    }
    .metric-card--detail-disabled,
    .metric-card--detail-disabled:hover {
      cursor: not-allowed;
      opacity: 0.6;
      transform: none;
      box-shadow: none;
    }
    .metric-detail-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .metric-detail-modal.is-visible {
      display: flex;
    }
    .metric-detail-modal__overlay {
      position: absolute;
      inset: 0;
      background: rgba(20, 7, 33, 0.6);
      backdrop-filter: blur(4px);
    }
    .metric-detail-modal__panel {
      position: relative;
      max-width: 720px;
      width: min(720px, 92vw);
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 40px 120px rgba(12, 5, 28, 0.35);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      max-height: 85vh;
    }
    .metric-detail-modal__header {
      padding: 1.75rem 2.5rem 0;
    }
    .metric-detail-modal__body {
      padding: 1.5rem 2.5rem 2.25rem;
      overflow-y: auto;
    }
    .metric-detail-modal__close {
      position: absolute;
      top: 1.2rem;
      right: 1.2rem;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: none;
      background: rgba(0, 0, 0, 0.04);
      font-size: 1.4rem;
      cursor: pointer;
    }
    .metric-detail-modal__summary {
      margin: 0 0 1rem 1rem;
      color: #66557c;
    }
    .metric-detail-modal__list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .metric-detail-modal__item {
      border: 1px solid rgba(138, 110, 214, 0.25);
      border-radius: 16px;
      padding: 1rem 1.25rem;
      background: rgba(248, 244, 255, 0.95);
    }
    .metric-detail-modal__item-secondary {
      color: #6f5a98;
    }
    .metric-detail-modal__item-meta {
      font-size: 0.85rem;
      margin-top: 0.35rem;
      color: #8b7ca8;
    }
    .metric-detail-modal__empty {
      margin: 0;
      color: #6d5c86;
    }
  </style>
</head>
<a
  id="recruiterLabBtn"
  class="recruiter-lab-btn"
  href="https://dashboard.vintti.com/public/dashboard/ca9c80d2-854e-4feb-9a99-5cc6e2519c84?mode=monthly_cr_cw=&recruiter=&recruiter1=&tab=41-wins-%26-losts"
  target="_blank"
  rel="noopener"
  style="display:none"
>
  <span class="lab-emoji">üß™</span>
  <span class="lab-text">Recruiter Lab</span>
</a>
<body>
  <main class="metrics-page">
<header class="metrics-header">
  <div class="metrics-title-block">
    <h1 class="metrics-title">Recruiter Performance Dashboard</h1>
    <p class="metrics-subtitle">
      Track wins, losses and conversion rate per HR lead (custom date range + lifetime).
    </p>
  </div>
</header>

<!-- ‚úÖ filtros debajo del t√≠tulo -->
<section class="metrics-filters" aria-label="Filters">
  <div class="metrics-filter">
    <label for="hrLeadSelect" class="filter-label">Recruiter</label>
    <select id="hrLeadSelect" class="filter-select">
      <option value="">Loading recruiters...</option>
    </select>
  </div>

  <div class="metrics-filter">
    <span class="filter-label">Date range</span>

    <div class="date-range">
      <label class="date-chip">
        <span class="date-chip-label">From</span>
        <input id="rangeStart" type="date" />
      </label>

      <label class="date-chip">
        <span class="date-chip-label">To</span>
        <input id="rangeEnd" type="date" />
      </label>

      <button id="applyRangeBtn" class="apply-range-btn" type="button">
        Apply
      </button>
    </div>

    <div id="rangeError" class="range-error" style="display:none;"></div>
  </div>
</section>
    <section class="metrics-cards" aria-live="polite">
      <article
        class="metric-card metric-win-month metric-card--detail-disabled"
        data-metric-detail="closedWinRange"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label" id="winRangeLabel">Closed Win ¬∑ Last 30 Days</span>
          <span class="metric-compare" id="winMonthCompare">‚Äì</span>
        </div>
        <div class="metric-value" id="closedWinMonthValue">‚Äì</div>
        <p class="metric-caption">
          Opportunities marked as <strong>Closed Win</strong> in the last 30 days.
        </p>
      </article>

      <article
        class="metric-card metric-lost-month metric-card--detail-disabled"
        data-metric-detail="closedLostRange"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
         <span class="metric-label" id="lostRangeLabel">Closed Lost ¬∑ Last 30 Days</span>
          <span class="metric-compare" id="lostMonthCompare">‚Äì</span>
        </div>
        <div class="metric-value" id="closedLostMonthValue">‚Äì</div>
        <p class="metric-caption">
          Opportunities marked as <strong>Closed Lost</strong> in the last 30 days.
        </p>
      </article>

      <article
        class="metric-card metric-win-total metric-card--detail-disabled"
        data-metric-detail="closedWinTotal"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Total Closed Win</span>
          <span class="metric-pill metric-pill-win-soft">All time</span>
        </div>
        <div class="metric-value" id="closedWinTotalValue">‚Äì</div>
        <p class="metric-caption">
          Lifetime <strong>Closed Win</strong> opportunities for this recruiter.
        </p>
      </article>

      <article
        class="metric-card metric-lost-total metric-card--detail-disabled"
        data-metric-detail="closedLostTotal"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Total Closed Lost</span>
          <span class="metric-pill metric-pill-lost-soft">All time</span>
        </div>
        <div class="metric-value" id="closedLostTotalValue">‚Äì</div>
        <p class="metric-caption">
          Lifetime <strong>Closed Lost</strong> opportunities for this recruiter.
        </p>
      </article>

      <article
        class="metric-card metric-conversion metric-card--detail-disabled"
        data-metric-detail="conversionRange"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label" id="convRangeLabel">Conversion ¬∑ Last 30 Days</span>
          <span class="metric-pill metric-pill-conv">%</span>
        </div>
        <div class="metric-value" id="conversionRateValue">‚Äì</div>
        <p class="metric-caption" id="conversionHelper">
          Percentage of <strong>Closed Win</strong> among closed opportunities in the last 30 days.
        </p>
      </article>

      <article
        class="metric-card metric-conversion-lifetime metric-card--detail-disabled"
        data-metric-detail="conversionLifetime"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Conversion ¬∑ Lifetime</span>
          <span class="metric-pill metric-pill-conv">%</span>
        </div>
        <div class="metric-value" id="conversionLifetimeValue">‚Äì</div>
        <p class="metric-caption">
          Lifetime share of <strong>Closed Win</strong> over all closed opportunities.
        </p>
      </article>

      <article
        class="metric-card metric-close-win-avg metric-card--detail-disabled"
        data-metric-detail="avgCloseWin"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Average days to close (Win)</span>
          <span class="metric-pill metric-pill-win-soft">Selected range</span>
        </div>
        <div class="metric-value" id="avgCloseWinValue">‚Äì</div>
        <p class="metric-caption">
          From start date (NDA/sourcing) to <strong>Closed Win</strong> within the selected range.
        </p>
      </article>

      <article
        class="metric-card metric-close-lost-avg metric-card--detail-disabled"
        data-metric-detail="avgCloseLost"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Average days to close (Lost)</span>
          <span class="metric-pill metric-pill-lost-soft">Selected range</span>
        </div>
        <div class="metric-value" id="avgCloseLostValue">‚Äì</div>
        <p class="metric-caption">
          From start date to <strong>Closed Lost</strong> within the selected range.
        </p>
      </article>

      <article
        class="metric-card metric-batch-open metric-card--detail-disabled"
        data-metric-detail="avgBatchOpen"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Average days to first batch (Open)</span>
          <span class="metric-pill metric-pill-conv">Active opps</span>
        </div>
        <div class="metric-value" id="avgBatchOpenValue">‚Äì</div>
        <p class="metric-caption">
          Open opportunities starting within the range. <span class="metric-caption-subtle">No data ‚Üí ‚Äú‚Äî‚Äù.</span>
        </p>
      </article>

      <article
        class="metric-card metric-batch-closed metric-card--detail-disabled"
        data-metric-detail="avgBatchClosed"
        role="button"
        tabindex="-1"
        aria-disabled="true"
      >
        <div class="metric-header">
          <span class="metric-label">Average days to first batch (Closed)</span>
          <span class="metric-pill metric-pill-conv">Closed opps</span>
        </div>
        <div class="metric-value" id="avgBatchClosedValue">‚Äì</div>
        <p class="metric-caption">
          Closed opportunities where the first batch landed before closing.
        </p>
      </article>

      <article class="metric-card metric-interview-rate">
        <div class="metric-header">
          <span class="metric-label">Interview rate</span>
          <span class="metric-pill metric-pill-conv">Interviewed / Sent</span>
        </div>
        <div class="metric-value" id="interviewRateValue">‚Äì</div>
        <p class="metric-caption">
          Share of sent candidates that reached interview stages.
        </p>
        <p class="metric-caption metric-caption-subtle" id="interviewRateHelper">(‚Äî / ‚Äî)</p>
      </article>

      <article class="metric-card metric-hire-rate">
        <div class="metric-header">
          <span class="metric-label">Hire rate</span>
          <span class="metric-pill metric-pill-conv">Hired / Sent</span>
        </div>
        <div class="metric-value" id="hireRateValue">‚Äì</div>
        <p class="metric-caption">
          Sent candidates that converted into hires in the selected range.
        </p>
        <p class="metric-caption metric-caption-subtle" id="hireRateHelper">(‚Äî / ‚Äî)</p>
      </article>

      <article class="metric-card metric-churn-range">
        <div class="metric-header">
          <span class="metric-label">Total churn ¬∑ Selected range</span>
          <span class="metric-pill metric-pill-churn">End date based</span>
        </div>
        <div class="metric-value" id="churnRangeCount">‚Äì</div>
        <p class="metric-caption" id="churnRangeHelper">
          People who left within the selected dates.
        </p>
      </article>

      <article class="metric-card metric-early-churn">
        <div class="metric-header">
          <span class="metric-label">Left within 90 days</span>
          <span class="metric-pill metric-pill-early">Tenure insight</span>
        </div>
        <div class="metric-value metric-value-combo" id="left90Value">
          <span class="metric-number" id="left90Count">‚Äì</span>
          <span class="metric-percent" id="left90Rate">‚Äì</span>
        </div>
        <p class="metric-caption metric-caption-subtle" id="left90RangeLabel"></p>
        <p class="metric-caption">People who left before reaching 90 days.</p>
        <p class="metric-caption" id="left90Helper">Based on ‚Äì churned hires with a start date.</p>
      </article>
    </section>

    <section class="churn-details" id="churnDetailsSection">
      <div class="churn-details-head">
        <div>
          <h2>Churn details</h2>
          <p>See which hires left, when they started and which opportunity they belonged to.</p>
        </div>
        <p class="churn-details-note">Churn is calculated when a hire end date is recorded.</p>
      </div>
      <div class="churn-details-table-wrapper">
        <table class="churn-table">
          <thead>
            <tr>
              <th>Candidate</th>
              <th>Opportunity</th>
              <th>Started</th>
              <th>Ended</th>
              <th>Tenure</th>
              <th>HR Lead</th>
            </tr>
          </thead>
          <tbody id="churnDetailsTableBody"></tbody>
        </table>
        <div class="churn-details-empty" id="churnDetailsEmpty">
          Select a recruiter to see churn details.
        </div>
      </div>
    </section>

    <section class="meta-footer">
      <p id="periodInfo" class="meta-text"></p>
    </section>
  </main>
  <div id="metricDetailModal" class="metric-detail-modal" hidden>
    <div class="metric-detail-modal__overlay" data-modal-overlay></div>
    <div
      class="metric-detail-modal__panel"
      role="dialog"
      aria-modal="true"
      aria-labelledby="metricDetailTitle"
    >
      <button type="button" id="metricDetailCloseBtn" class="metric-detail-modal__close" aria-label="Close details">
        √ó
      </button>
      <div class="metric-detail-modal__header">
        <h2 id="metricDetailTitle">Metric detail</h2>
        <p id="metricDetailContext"></p>
      </div>
      <div class="metric-detail-modal__body">
        <ul id="metricDetailSummary" class="metric-detail-modal__summary"></ul>
        <ul id="metricDetailList" class="metric-detail-modal__list"></ul>
        <p id="metricDetailEmpty" class="metric-detail-modal__empty"></p>
      </div>
    </div>
  </div>

  <script src="./assets/js/recruiter-power.js"></script>
</body>
</html>

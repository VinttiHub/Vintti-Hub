<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Opportunity Details</title>
  <link rel="stylesheet" href="./assets/css/opportunity-detail.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<script src="./assets/js/pipeline.js"></script>
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<body>
  <header class="detail-header">
    <div class="header-left">
      <h1 class="detail-title">Opportunity Detail</h1>
    </div>
    <nav class="detail-nav">
      <ul>
        <li class="nav-item active">Overview</li>
        <li class="nav-item">Job Description</li>
        <li class="nav-item">Pipeline</li>
        <li class="nav-item">Candidates</li>
        <div class="nav-indicator"></div>
      </ul>
    </nav>
  </header>

  <main class="detail-main">
    <section id="overview" class="detail-section">
      <div class="section-header">
        <h2>Overview</h2>
        <p class="section-subtext"> </p>
      </div>

<div class="overview-card">
  <div class="stage-top">
    <div>
      <label class="section-label">Opportunity ID</label>
      <div class="stage-id">
        <span id="opportunity-id-text" data-id="">‚Äî</span>
      </div>
    </div>
  </div>

  <div class="overview-grid">
    <div class="input-group">
      <label>Start Date</label>
      <input type="text" id="start-date-input" value="" />
    </div>
    <div class="input-group">
      <label>Signed</label>
      <div class="info-tag" id="signed-tag">‚Äî</div>
    </div>
    <div class="input-group">
      <label>Closed Date</label>
      <input type="text" id="close-date-input" placeholder="Closed Date" />
    </div>
    <div class="input-group">
      <label>Hire</label>
      <input id="hire-display" type="text" readonly placeholder="No hire assigned yet" />
    </div>
  </div>
  <div class="input-group full">
  <label>Comments</label>
  <textarea id="comments-overview-textarea" placeholder="Write internal comments here..."></textarea>
</div>
</div>

<!-- Client -->
<div class="overview-card">
  <div class="card-title-row">
    <button class="card-toggle">
      <h3>Client</h3>
      <span class="toggle-icon">‚ñæ</span>
    </button>
  </div>
  <div class="card-content">
    <div class="overview-grid">
      <div class="input-group"><label>Name</label><input id="client-name-input" value="" readonly/></div>
      <div class="input-group"><label>Size</label>
          <select id="client-size-input" disabled>
            <option value="">Select Size...</option>
            <option value="1-10">1-10</option>
            <option value="11-50">11-50</option>
            <option value="51-200">51-200</option>
            <option value="201-500">201-500</option>
            <option value="+500">+500</option>
          </select>
          </div>
      <div class="input-group"><label>State</label><input id="client-state-input" value="" ></div>
      <div class="input-group"><label>Linkedin</label><input id="client-linkedin-input" value="" ></div>
      <div class="input-group"><label>Website</label><input id="client-website-input" value="" ></div>
      <div class="input-group full"><label>Mail</label><input id="client-mail-input" value="" ></div>
      <div class="input-group full"><label>About</label><textarea id="client-about-textarea" ></textarea></div>
    </div>
  </div>
</div>


<!-- Details -->
<div class="overview-card">
  <button class="card-toggle">
    <h3>Details</h3>
    <span class="toggle-icon">‚ñæ</span>
  </button>
  <div class="card-content">
    <div class="overview-grid">
      <div class="input-group"><label>Opportunity Name</label><input id="details-opportunity-name" value="" ></div>
      <div class="input-group"><label>Account</label><input id="details-account-name" value="" readonly/></div>
      <div class="input-group"><label>Sales Lead</label><select id="details-sales-lead"><option></option></select></div>
      <div class="input-group"><label>HR Lead</label><select id="details-hr-lead"><option></option></select></div>
      <div class="input-group"><label>Model</label>
        <select id="details-model">
          <option value="Staffing">Staffing</option>
          <option value="Recruiting">Recruiting</option>
        </select>
      </div>
    </div>
  </div>
</div>


<!-- First Meeting -->
<div class="overview-card">
  <button class="card-toggle">
    <h3>First Meeting Information</h3>
    <span class="toggle-icon">‚ñæ</span>
  </button>
  <div class="card-content">
    <div class="overview-grid">
    <div class="input-group"><label>Client Budget</label><input id="min-budget-input" /></div>
    <div class="input-group"><label>&nbsp;</label><input id="max-budget-input" /></div>
    <div class="input-group"><label>Candidate Salary Range</label><input id="min-salary-input" /></div>
    <div class="input-group"><label>&nbsp;</label><input id="max-salary-input" /></div>
    <div class="input-group"><label>Model</label>
      <select id="model-select">
        <option value="Staffing">Staffing</option>
        <option value="Recruiting">Recruiting</option>
      </select>
    </div>
    <div class="input-group"><label>Years of Experience</label><input id="years-experience-input" /></div>
    <div class="input-group"><label>Set Up Fee</label><input id="fee-input" /></div>
    <div class="input-group"><label>Time Zone</label><input id="timezone-input" /></div>
    <div class="input-group full"><label>First Meeting Comments</label><textarea id="comments-firstmeeting-textarea"></textarea></div>
    <div class="input-group full"><label>First Meeting Recording</label><input id="recording-input" /></div>
    </div>
  </div>
</div>
    </section>
    

    <section id="job" class="detail-section hidden">
      <div class="job-header">
        <div class="job-header-left">
          <h2>Job Description</h2>
          <p class="subtitle">Complete job description for this opportunity.</p>
        </div>
        <div class="job-header-right">
          <button class="header-btn">Send</button>
        </div>
      </div>
  
      <div class="job-card">
        <textarea id="job-description-textarea" style="width: 100%; height: 400px; padding: 10px; font-size: 1rem;"></textarea>
      </div>
    </section>
    
    <section id="pipeline" class="detail-section hidden pipeline-section">
      <div class="pipeline-header">
        <h2>Pipeline</h2>
        <div class="pipeline-actions">
          <button id="createCandidateBtn">+ Create Candidate</button>
          <button id="signOffBtn">Sign off</button>
        </div>
      </div>
    
      <div class="pipeline-columns">
        <!-- Column 1 -->
        <div class="column" data-status="contacted">
          <h3>Contactado</h3>
          <div class="card-container" id="contacted">
          </div>
        </div>
        <!-- Column: No avanza primera -->
        <div class="column" data-status="no-advance">
          <h3>No avanza primera</h3>
          <div class="card-container" id="no-advance">
            <!-- puedes dejarlo vac√≠o por ahora -->
          </div>
        </div>
        <!-- Column 2 -->
        <div class="column" data-status="first-interview">
          <h3>Primera entrevista</h3>
          <div class="card-container" id="first-interview">
          </div>
        </div>
    
        <!-- Column 3 -->
        <div class="column" data-status="client-process">
          <h3>En proceso con Cliente</h3>
          <div class="card-container" id="client-process">
          </div>
        </div>
      </div>
    </section>
    
    
    <section id="candidates" class="detail-section fade-in">
      <div class="candidates-header">
        <div>
          <h2>Candidates</h2>
          <p class="subtitle">See the final candidates for this opportunity.</p>
        </div>
      </div>
    
      <div class="batch-table">
        <table>
          <thead>
            <tr>
              <th>Batch #</th>
              <th>Presentation Date</th>
              <th>Time</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>#1</td>
              <td>Apr 8, 2025</td>
              <td>5</td>
              <td><button class="view-btn">View</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    
      <div class="batch-detail" id="batch-detail-container">
        <!-- Aqu√≠ se insertar√°n din√°micamente los batch-box -->
      </div>
      <div class="create-batch-wrap">
        <button class="btn-create">Create new batch</button>
      </div>
    </section>
    
  </main>
  <!-- AI Assistant Button -->
  <div id="ai-assistant-btn" style="display: none;">
    ‚ú® AI Assistant ‚ú®
  </div>

  <!-- AI Assistant Popup -->
  <div id="ai-assistant-popup" class="ai-popup hidden">
    <div class="ai-popup-content">
      <h2>AI Assistant</h2>
      <label>Intro Call</label>
      <textarea placeholder="00:00 Speaker: Text here..."></textarea>

      <label>Deep Dive Call</label>
      <input type="text" placeholder="2nd_Call_Transcript" />

      <label>Notes / Emails</label>
      <textarea placeholder="Your notes here..."></textarea>

      <label>Files</label>
      <div class="file-upload">
        <input type="file" />
        <div class="upload-icon">‚òÅÔ∏è‚¨ÜÔ∏è</div>
      </div>

      <button id="ai-assistant-go">Let's Go üöÄ</button>
      <button id="ai-assistant-close">Close</button>
    </div>
  </div>
    <!-- ADD Candidate Popup -->
    <div id="candidatePopup" class="popup hidden">
      <div class="popup-content">
        <span class="close-btn" id="closePopup">&times;</span>
        <h2>Add Candidate</h2>
        <input type="text" id="candidate-name" placeholder="Full name" autocomplete="off"/>
        <ul id="pipelineCandidateSearchResults" class="search-results-list"></ul>
        <div id="extra-fields">
        <input type="text" id="candidate-email" placeholder="Email" />
        <input type="text" id="candidate-country" placeholder="Country" />
        <input type="text" id="candidate-phone" placeholder="Phone number" />
        <input type="text" id="candidate-linkedin" placeholder="LinkedIn URL" />
        <input type="text" id="candidate-redflags" placeholder="Red Flags" />
        <input type="text" id="candidate-comments" placeholder="Comments" />
        <select id="candidate-english" placeholder="English Level">
          <option value="">Select English Level</option>
          <option value="Bad">Bad</option>
          <option value="Regular">Regular</option>
          <option value="Good">Good</option>
          <option value="Excellent">Excellent</option>
        </select>
        <input type="number" id="candidate-salary" placeholder="Minimum Salary (USD)" />
        <button id="popupcreateCandidateBtn">Create Candidate</button>
        </div>
        <button id="popupAddExistingBtn" style="display:none;">Add Candidate to Pipeline</button>
      </div>
    </div>

<!-- Popup para agregar candidato a batch -->
<div id="batchCandidatePopup" class="popup hidden">
  <div class="popup-content">
    <span class="close-btn" id="closeBatchPopup">&times;</span>
    <h2>Select Candidate</h2>
    <input type="text" id="candidateSearchInput" placeholder="Search by name..." />
    <ul id="candidateSearchResults" class="search-results-list"></ul>
  </div>
</div>
<template id="candidate-card-template">
  <div class="candidate-card">
    <div class="candidate-card-header">
      <strong class="candidate-name">Name</strong>
      <select class="candidate-status-dropdown">
        <option disabled selected>Status</option>
        <option value="Client rejected CV">Client rejected CV</option>
        <option value="Client interviewing/testing">Client interviewing/testing</option>
        <option value="Client rejected after interviewing">Client rejected after interviewing</option>
        <option value="Candidate abandoned process">Candidate abandoned process</option>
        <option value="Client hired">Client hired</option>
      </select>
    </div>
    <div class="preview">
      <img class="candidate-img" src="" />
      <div class="info">
        <span class="name candidate-name">Name</span>
        <span class="email candidate-email"></span>
      </div>
    </div>
  </div>
</template>
<div id="emailPopup" class="popup hidden">
  <div class="popup-content email-popup-content">
    <span class="close-btn" id="closeEmailPopup">&times;</span>
    <h2>Send Job Description</h2>

    <label>To</label>
    <select id="email-to" multiple></select>

    <label>CC</label>
    <select id="email-cc" multiple></select>

    <label>Subject</label>
    <input type="text" id="email-subject" placeholder="Subject..." />

    <label>Message</label>
    <textarea id="email-message" style="height: 200px;"></textarea>

    <button id="sendEmailBtn">Send</button>
  </div>
</div>
<!-- Popup inicial para elegir acci√≥n -->
<div id="chooseCandidateActionPopup" class="popup hidden">
  <div class="popup-content">
    <span class="close-btn" id="closeChoosePopup">&times;</span>
    <h2>Add to Pipeline</h2>
    <p>How would you like to add a candidate?</p>
        <span id="name-warning" style="color: #c00; font-size: .9em; display:none;">
          Try searching before creating
        </span>
    <button id="openExistingCandidatePopup">Add Existing Candidate</button>
    <button id="openNewCandidatePopup">Create New Candidate</button>
  </div>
</div>
<div id="email-overlay" class="email-overlay hidden">
  <div class="email-overlay-content">
    <span class="spinner"></span>
    <p id="email-overlay-message">Sending email...</p>
  </div>
</div>

<!-- Sign Off Popup -->
<div id="signOffPopup" class="popup hidden">
  <div class="popup-content email-popup-content">
    <span class="close-btn" id="closeSignOffPopup">&times;</span>
    <h2>Send Rejection Email</h2>

    <label>To</label>
    <select id="signoff-to" multiple></select>

    <label>Subject</label>
    <input type="text" id="signoff-subject" value="Update on your application" />

    <label>Message</label>
    <textarea id="signoff-message" style="height: 200px;">Dear applicant,

Thank you so much for being part of our process at Vintti. After careful consideration, we‚Äôve decided to move forward with another candidate.

We truly appreciate your time and interest!
If you'd like to share your experience with the selection process, here‚Äôs a short anonymous survey (under 3 minutes):
üîó https://tally.so/r/w7K859

Wishing you all the best in your journey! ‚ú®
Warmly,
the Vintti team</textarea>

    <div style="margin-top: 10px;">
      <button id="toggleLangBtn">Change Language</button>
    </div>

    <button id="sendSignOffBtn">Send</button>
  </div>
</div>
<div id="approvalEmailPopup" class="popup hidden">
  <div class="popup-content email-popup-content">
    <span class="close-btn" id="closeApprovalEmailPopup">&times;</span>
    <h2>Send Candidates for Approval</h2>

    <label>To</label>
    <select id="approval-to" multiple></select>

    <label>CC</label>
    <select id="approval-cc" multiple></select>

    <label>Subject</label>
    <input type="text" id="approval-subject" placeholder="Subject..." />

    <label>Message</label>
    <textarea id="approval-message" style="height: 300px;"></textarea>

    <button id="sendApprovalEmailBtn">Send</button>
  </div>
</div>

<script src="./assets/js/opportunity-detail.js"></script>
</body>
</html>


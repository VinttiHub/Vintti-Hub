<!DOCTYPE html>
<html lang="en">
<head>
  <!-- === Meta & Title === -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Account Details</title>
  <script src="./assets/js/auth-guard.js"></script>

  <!-- === Typography === -->
  <!-- Onest for UI text -->
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;600&display=swap" rel="stylesheet" />

  <!-- === Styles === -->
  <link rel="stylesheet" href="./assets/css/account-details.css" />
  <link rel="stylesheet" href="./assets/css/rich-comments.css" />
  <!-- Litepicker styles (calendar UI used elsewhere by your JS) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/litepicker/dist/css/litepicker.css" />
</head>

<body>
  <!-- ===== Global: Go Back control ===== -->
  <!-- Kept id/class; added type and aria-label -->
  <button id="goBackButton" class="go-back-button" type="button" title="Go Back" aria-label="Go back to previous page">
    ‚Üê Go Back
  </button>

  <!-- ===== Main app container ===== -->
  <main class="main-content" role="main" aria-labelledby="page-title">
    <h1 id="page-title" class="page-title">Account Details</h1>

    <!-- ===== Tab selector (Overview / Employees) ===== -->
    <div class="tab-selector" role="tablist" aria-label="Account sections">
      <button class="tab-btn active" data-tab="overview" role="tab" aria-selected="true" aria-controls="overview">Overview</button>
      <button class="tab-btn" data-tab="employees" role="tab" aria-selected="false" aria-controls="employees">Employees</button>
    </div>

    <!-- =========================
         TAB: OVERVIEW
         ========================= -->
    <section class="tab-content active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
      <!-- ‚Äî‚Äî‚Äî Accordion: Account Info ‚Äî‚Äî‚Äî -->
      <div class="accordion-section open">
        <div class="accordion-header">Account Info üè¢</div>

        <div class="accordion-content">
          <!-- Two-column summary grid -->
          <div class="grid-two-cols">
            <!-- Kept IDs & placeholders; input preserved for external JS to read/write -->
            <p>
              <strong>Name:</strong>
              <input id="account-client-name" class="editable-input" type="text" placeholder="Not available" />
            </p>

            <p><strong>Size:</strong> <span id="account-size" class="placeholder">Not available</span></p>
            <p><strong>Timezone:</strong> <span id="account-timezone" class="placeholder">Not available</span></p>
            <p><strong>State:</strong> <span id="account-state" class="placeholder">Not available</span></p>
            <p><strong>Contact Name:</strong> <span id="account-contact-name" class="placeholder">Not available</span></p>
            <p><strong>Contact Surname:</strong> <span id="account-contact-surname" class="placeholder">Not available</span></p>
            <p>
              <strong>Email:</strong>
              <a id="account-mail-link" href="#" class="placeholder" aria-label="Send email to point of contact">Not available</a>
            </p>
            <p><strong>Industry:</strong> <span id="account-industry" class="placeholder">Not available</span></p>
            <p><strong>Lead Source:</strong> <span id="account-lead-source" class="placeholder">Not available</span></p>
            <p><strong>Referral Source:</strong> <span id="account-referral-source" class="placeholder">Not available</span></p>
            <p><strong>Outsource Before:</strong> <span id="account-outsource" class="placeholder">Not available</span></p>
            <p><strong>Position:</strong> <span id="account-position" class="placeholder">Not available</span></p>
            <p><strong>Type:</strong> <span id="account-type" class="placeholder">Not available</span></p>

            <!-- External links kept with same IDs; added rel and aria where helpful -->
            <p>
              <strong>LinkedIn:</strong>
              <a id="linkedin-link" href="#" target="_blank" rel="noopener" aria-label="Open LinkedIn profile">
                <img
                  src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg"
                  alt=""
                  style="width: 20px; vertical-align: middle; margin-right: 8px;"
                />
                <span class="sr-only">LinkedIn</span>
              </a>
              <button class="edit-btn" type="button" onclick="editField('linkedin')" aria-label="Edit LinkedIn">‚úé</button>
            </p>

            <p>
              <strong>Website:</strong>
              <a id="website-link" href="#" target="_blank" rel="noopener" aria-label="Open company website">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/841/841364.png"
                  alt=""
                  style="width: 20px; vertical-align: middle; margin-right: 8px;"
                />
                <span class="sr-only">Website</span>
              </a>
              <button class="edit-btn" type="button" onclick="editField('website')" aria-label="Edit website">‚úé</button>
            </p>

            <p><strong>Contract:</strong> <span id="account-contract" class="placeholder">Not available</span></p>
            <p><strong>Total Staffing Fee:</strong> <span id="account-tsf" class="placeholder">Not available</span></p>
            <p><strong>Total Staffing Revenue:</strong> <span id="account-tsr" class="placeholder">Not available</span></p>
            <p><strong>Total Recruiting Revenue:</strong> <span id="account-trr" class="placeholder">Not available</span></p>
          </div>

          <!-- ‚Äî‚Äî‚Äî Contracts manager block (full width) ‚Äî‚Äî‚Äî -->
          <section class="contracts-block" id="contracts-block" aria-labelledby="contracts-title">
            <div class="contracts-header">
              <div class="contracts-titles">
                <h3 id="contracts-title">Contracts</h3>
                <p class="subtle">Upload and manage all contract PDFs for this account.</p>
              </div>
              <div class="upload-row">
                <!-- Kept IDs; multiple upload preserved -->
                <input type="file" id="pdfUpload" accept="application/pdf" multiple aria-label="Select contract PDF files" />
                <button id="uploadPdfBtn" type="button">Upload</button>
              </div>
            </div>

            <!-- JS will render PDF previews here -->
            <div id="pdfPreviewContainer" class="contracts-list" aria-live="polite"></div>
          </section>

          <!-- Text areas (notes) -->
          <div class="comment-box">
            <label for="comments"><strong>About:</strong></label>
            <textarea id="comments" placeholder="Write comments here..." rows="4"></textarea>
          </div>

          <div class="comment-box">
            <label for="pain-points"><strong>Pain Points:</strong></label>
            <textarea id="pain-points" placeholder="Write Pain Points here..." rows="4"></textarea>
          </div>
        </div>
      </div>

      <!-- ‚Äî‚Äî‚Äî Accordion: Associated Opportunities ‚Äî‚Äî‚Äî -->
      <div class="accordion-section">
        <div class="accordion-header">Associated Opportunities üíº</div>

        <div class="accordion-content">
          <!-- Kept classes; table body remains empty for JS population -->
          <table class="styled-table" role="table" aria-label="Associated opportunities">
            <thead>
              <tr>
                <th scope="col">Position</th>
                <th scope="col">Stage</th>
                <th scope="col">Hire</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- =========================
         TAB: EMPLOYEES
         ========================= -->
    <section class="tab-content" id="employees" role="tabpanel" aria-labelledby="employees-tab" hidden>
      <!-- Staffing Employees -->
      <div class="card">
        <h2>Employees ‚Äì Staffing</h2>
        <table class="styled-table expandable" role="table" aria-label="Staffing employees">
          <thead>
            <tr>
              <th scope="col">Status</th>
              <th scope="col">Employee</th>
              <th scope="col">Start Date</th>
              <th scope="col">End Date</th>
              <th scope="col">Position</th>
              <th scope="col">Fee</th>
              <th scope="col">Salary</th>
              <th scope="col">Revenue</th>
              <th scope="col">Discount $</th>
              <th scope="col">Discount Date Range</th>
              <th scope="col">Discount Months</th>
              <th scope="col">Referral $</th>
              <th scope="col">Referral Date Range</th>
              <th scope="col">Buy Out $</th>
              <th scope="col">Buy Out Month</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Recruiting Employees -->
      <div class="card">
        <h2>Employees ‚Äì Recruiting</h2>
        <table class="styled-table expandable" role="table" aria-label="Recruiting employees">
          <thead>
            <tr>
              <th scope="col">Status</th>
              <th scope="col">Employee</th>
              <th scope="col">Start Date</th>
              <th scope="col">End Date</th>
              <th scope="col">Position</th>
              <th scope="col">Probation (Days)</th>
              <th scope="col">Salary</th>
              <th scope="col">Revenue</th>
              <th scope="col">Referral</th>
              <th scope="col">Referral Date Range</th>
              <th scope="col">Referral ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- ===== Discounts floating alert ===== -->
  <!-- Kept IDs/classes; visibility controlled by .hidden -->
  <aside id="discount-alert" class="discount-alert hidden" aria-live="polite">
    <button id="close-discount-alert" class="close-alert-btn" type="button" aria-label="Close discounts alert">‚ùå</button>
    <strong>‚ö° <span id="discount-count">0</span> discounts active</strong>
    <ul id="discount-list"></ul>
  </aside>

  <div class="todo-chat" data-todo-open="new-tab">
    <button type="button" class="todo-bubble" id="todoBubble" aria-label="Open Vintti Buddy" aria-expanded="false">
      <img class="todo-bubble__img" src="./assets/img/vinttibuddy.png" alt="Vintti Buddy" />
    </button>

    <section class="todo-panel" id="todoPanel" role="dialog" aria-labelledby="todoTitle" hidden>
      <div class="todo-panel__header">
        <div>
          <p class="todo-panel__eyebrow">Your tiny assistant</p>
          <h2 class="todo-panel__title" id="todoTitle">Vintti Buddy</h2>
        </div>
        <button type="button" class="todo-panel__close" id="todoClose" aria-label="Close">&times;</button>
      </div>
      <a class="todo-panel__details" href="to-do-details.html">Details ‚ú®</a>
      <p class="todo-panel__intro">
        Your Vintti Buddy is here to help you organize your tasks. Add a new task and I can remind you when it is close
        to the due date.
      </p>
      <div class="todo-list" id="todoList"></div>
      <p class="todo-empty" id="todoEmpty" hidden>No tasks yet.</p>
      <form class="todo-form" id="todoForm">
        <input type="text" id="todoDescription" name="description" placeholder="Presentation task" autocomplete="off" />
        <input type="date" id="todoDate" name="due_date" />
        <button type="submit">Add task</button>
        <p class="todo-form-error" id="todoFormError" hidden></p>
      </form>
    </section>
    <div class="todo-toast" id="todoToast" role="status" aria-live="polite"></div>
  </div>

  <!-- ===== Scripts (deferred) ===== -->
  <!-- Litepicker JS (used by your page JS). Loaded deferred to avoid blocking. -->
  <script src="https://cdn.jsdelivr.net/npm/litepicker/dist/litepicker.js" defer></script>

  <script src="./assets/js/rich-comment-box.js" defer></script>
  <script src="./assets/js/inactive-info-dialog.js" defer></script>
  <script src="./assets/js/to-do-chat.js" defer></script>
  <!-- Page logic (kept path & name). Defer improves first paint and keeps execution order. -->
  <script src="./assets/js/account-details.js" defer></script>

  <!-- Fallback for users without JS -->
  <noscript>This page requires JavaScript enabled to load account data.</noscript>

  <a
    id="clientOverviewFab"
    class="client-overview-fab"
    href="account-overview.html"
    target="_blank"
    rel="noopener"
  >
    üß≠ Client overview
  </a>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>My Profile ‚Ä¢ Vintti Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="./assets/css/profile.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;600;700;800;900&display=swap" rel="stylesheet">

</head>
<body>
  <main class="page">
    <!-- Header + Tabs -->
    <header class="header">
      <h1 class="title"></h1>
        <nav class="tabs" id="tabsBar" role="tablist" aria-label="Profile tabs">
          <button class="tab active" data-tab="profile" aria-selected="true">Profile</button>
          <button class="tab" data-tab="timeoff" aria-selected="false">Request Time Off</button>
          <button class="tab" data-tab="org" aria-selected="false">Vintti Dream Team</button>
        </nav>
    </header>

    <!-- Avatar -->
    <!-- <section class="avatar-wrap">
      <div class="avatar" id="avatar">
        <img id="avatarImg" alt="User avatar" />
        <span id="avatarInitials" aria-hidden="true"></span>
      </div>
    </section> -->

    <!-- Panels
    <section class="panel active" id="panel-profile" role="tabpanel" aria-labelledby="tab-profile">
      <form id="profileForm" class="form">
        <div class="grid">
          <label class="field">
            <span class="label">Full Name</span>
            <input name="user_name" id="user_name" placeholder="Full Name" />
          </label>

          <label class="field">
            <span class="label">Vintti Email</span>
            <input name="email_vintti" id="email_vintti" type="email" placeholder="name@vintti.com" />
          </label>

          <label class="field">
            <span class="label">Role</span>
            <input name="role" id="role" placeholder="Role" />
          </label>

          <label class="field">
            <span class="label">Emergency Contact</span>
            <input name="emergency_contact" id="emergency_contact" placeholder="+57 300 000 0000 ‚Äî Contact Name" />
          </label>

          <label class="field">
            <span class="label">Vintti Start Date</span>
            <input name="ingreso_vintti_date" id="ingreso_vintti_date" type="date" />
          </label>

          <label class="field">
            <span class="label">Date of Birth</span>
            <input name="fecha_nacimiento" id="fecha_nacimiento" type="date" />
          </label>
        </div>

        <div class="actions">
          <button type="submit" class="btn primary">Save Changes</button>
          <span id="profileToast" class="toast" role="status" aria-live="polite"></span>
        </div>
      </form>
    </section> -->

    <section class="panel active" id="panel-profile" role="tabpanel" aria-labelledby="tab-profile">
      <!-- ===== Profile VIEW (solo lectura) ===== -->
      <section id="profileView" class="view">
        <!-- Header card -->
        
        <div class="card header-card">
          <div class="header-left">
            <div class="avatar" id="avatar">
              <img id="avatarImg" alt="User avatar" />
              <span id="avatarInitials" aria-hidden="true"></span>
            </div>
            <div class="who">
              <h2 id="v_user_name" class="name">‚Äî</h2>
              <div id="v_role" class="muted">‚Äî</div>
              <div id="v_location" class="muted" hidden>‚Äî</div>
            </div>
          </div>
          <div class="header-right">
            <button class="btn pill ghost" type="button" id="btnEditHeader">
            Edit <span aria-hidden="true">‚úé</span>
          </button>
          </div>
        </div>

        <!-- Personal info card -->
        <div class="card">
          <div class="card-head">
            <h3 class="title">Personal information</h3>
          </div>

          <div class="info-grid">
            <div class="info-field">
              <div class="label">Vintti Email</div>
              <div id="v_email" class="value">‚Äî</div>
            </div>
            <div class="info-field">
              <div class="label">Emergency Contact</div>
              <div id="v_emergency" class="value">‚Äî</div>
            </div>
            <div class="info-field">
              <div class="label">Vintti Start Date</div>
              <div id="v_start" class="value">‚Äî</div>
            </div>
            <div class="info-field">
              <div class="label">Date of Birth</div>
              <div id="v_birth" class="value">‚Äî</div>
            </div>
          </div>
        </div>
      </section>

  <!-- ===== Profile EDIT (tu form actual) ===== -->
      <section id="profileEdit" class="edit" hidden>
        <!-- acciones arriba a la derecha como en la referencia -->
        <div class="card form-card">
          <div class="card-head">
            <h3 class="title">Edit personal information</h3>
            <div class="actions">
              <button type="button" id="btnCancelEdit" class="btn">Cancel</button>
            </div>
          </div>

          <!-- tu formulario tal cual -->
          <form id="profileForm" class="form">
            <div class="grid">
              <label class="field">
                <span class="label">Full Name</span>
                <input name="user_name" id="user_name" placeholder="Full Name" />
              </label>

              <label class="field">
                <span class="label">Vintti Email</span>
                <input name="email_vintti" id="email_vintti" type="email" placeholder="name@vintti.com" />
              </label>

              <label class="field">
                <span class="label">Role</span>
                <input name="role" id="role" placeholder="Role" />
              </label>

              <label class="field">
                <span class="label">Emergency Contact</span>
                <input name="emergency_contact" id="emergency_contact" placeholder="+57 300 000 0000 ‚Äî Contact Name" />
              </label>

              <label class="field">
                <span class="label">Vintti Start Date</span>
                <input name="ingreso_vintti_date" id="ingreso_vintti_date" type="date" />
              </label>

              <label class="field">
                <span class="label">Date of Birth</span>
                <input name="fecha_nacimiento" id="fecha_nacimiento" type="date" />
              </label>
            </div>

            <div class="actions">
              <button type="submit" class="btn primary">Save Changes</button>
              <span id="profileToast" class="toast" role="status" aria-live="polite"></span>
            </div>
          </form>
        </div>
      </section>
    </section>

    <section class="panel" id="panel-timeoff" role="tabpanel" aria-labelledby="tab-timeoff" hidden>
      <section class="requests">
        <header class="requests-head">
          <h2 class="list-title">My Requests</h2>
          <div class="legend">
            <span class="badge-soft badge--vac">Vacation</span>
            <span class="badge-soft badge--vd">Vintti Day</span>
            <span class="badge-soft badge--hol">Public Holidays</span>
          </div>
        </header>

        <div id="requestsTable" class="requests-table">
          <div class="skeleton-row"></div>
          <div class="skeleton-row"></div>
          <div class="skeleton-row"></div>
        </div>
      </section>

      <!-- ‚Äî‚Äî‚Äî Time Off Balances (read-only) ‚Äî‚Äî‚Äî -->
      <section class="balances" aria-label="Time Off Balances">
        <header class="balances-head">
          <h2 class="balances-title">Time Off Balances</h2>
          <span class="balances-caption">Read-only</span>
        </header>

        <!-- Tarjetas en lugar de tabla -->
      <div class="balances-cards" id="balancesTable">
        <!-- Las tarjetas se generan desde JS con renderBalances() -->
      </div>

        <!-- üîπ Tabla gen√©rica con 3 columnas (se muestra al hacer click en una tarjeta) -->
      <div id="balancesDetails" class="balances-details" hidden>
        <table class="balances-details-table">
          <thead>
            <tr>
              <th>Column 1</th>
              <th>Column 2</th>
              <th>Column 3</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>‚Äî</td>
              <td>‚Äî</td>
              <td>‚Äî</td>
            </tr>
          </tbody>
        </table>

        <!-- üîπ nuevo historial de d√≠as consumidos -->
        <div class="balances-history">
          <h4 class="balances-history-title">Approved days used</h4>
          <table class="balances-details-table" id="balancesHistoryTable">
            <thead>
              <tr>
                <th>Start date</th>
                <th>End date</th>
                <th>Days used</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="3">Select a card to see your used days.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      </section>
      

      <div class="list">
<div class="timeoff-actions">
  <button id="btnOpenTimeoff" class="btn fun">
    ‚ú® Take a Break ‚ú®
  </button>
</div>

<!-- ‚Äî‚Äî‚Äî Modal: Request Time Off ‚Äî‚Äî‚Äî -->
<div id="timeoffModal" class="modal" aria-hidden="true">
  <div class="modal__backdrop" data-close-modal></div>
  <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="timeoffTitle">
    <header class="modal__head">
      <h3 id="timeoffTitle">Request Time Off</h3>
      <button class="modal__close" title="Close" data-close-modal>√ó</button>
    </header>

    <form id="timeoffForm" class="form">
      <div class="grid">
        <label class="field">
          <span class="label">Type</span>
          <select id="kind" required>
            <option value="vacation">Vacation</option>
            <option value="holiday">Public Holidays</option>
            <option value="vintti_day">Vintti Day</option>
          </select>
        </label>

        <label class="field">
          <span class="label">Start</span>
          <input id="start_date" type="date" required />
        </label>

        <label class="field">
          <span class="label">End</span>
          <input id="end_date" type="date" required />
        </label>

        <label class="field" style="grid-column:1/-1;">
          <span class="label">Note (optional)</span>
          <textarea id="reason" rows="3" placeholder="Family plan, medical appointment, etc."></textarea>
        </label>
      </div>

      <div class="actions">
        <button type="submit" class="btn primary">Send Request ‚úàÔ∏è</button>
        <button type="button" class="btn" data-close-modal>Cancel</button>
        <span id="timeoffToast" class="toast" role="status" aria-live="polite"></span>
      </div>
    </form>
  </div>
</div>

<!-- ‚Äî‚Äî‚Äî Success Splash (auto hides) ‚Äî‚Äî‚Äî -->
    <div id="timeoffCongrats" class="splash" aria-hidden="true" role="status" aria-live="polite">
      <div class="tc-card">
        <div class="tc-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="28" height="28" aria-hidden="true">
            <circle cx="12" cy="12" r="11" fill="none" stroke="currentColor" stroke-opacity=".18" stroke-width="2"/>
            <path d="M7 12.5l3 3 7-7" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="tc-title">Time Off Requested</h3>
        <p class="tc-sub">You deserve a rest. We‚Äôll notify your lead üíå</p>
      </div>
    </div>

      </div>
    </section>
<section class="panel" id="panel-org" role="tabpanel" aria-labelledby="tab-org" hidden>
  <div class="org-container">

    <div class="org-header">
      <h2 class="org-title">Today, we look like this</h2>
      <p class="org-subtitle">A snapshot of our amazing Vintti Dream Team</p>
    </div>

    <div class="org-image-card">
      <img src="./assets/img/organigrama.png" alt="Vintti Team Org Chart" class="org-img">
    </div>

    <p class="org-note">‚ú® Tap the chart to zoom if needed</p>

  </div>
</section>

<section class="panel" id="panel-teampto" role="tabpanel" aria-labelledby="tab-teampto" hidden>
  <header class="teampto-head">
    <h2 class="teampto-title">Team PTO</h2>
    <div class="legend">
            <span class="badge-soft badge--vac">Vacation</span>
            <span class="badge-soft badge--vd">Vintti Day</span>
            <span class="badge-soft badge--hol">Public Holidays</span>
          </div>
    <span class="teampto-caption">Read-only</span>
  </header>

  <div id="teamPtoTable" class="teampto-table">
    <!-- Filled by JS -->
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
  </div>
</section>
<!-- ===== Approvals (leaders only) ===== -->
<section class="panel" id="panel-approvals" role="tabpanel" aria-labelledby="tab-approvals" hidden>
  <header class="approvals-head">
    <h2 class="approvals-title">Approvals</h2>
    <div class="team-pill" id="approvalsTeamPill" hidden>
      Team: <b id="approvalsTeamName"></b>
    </div>
  </header>

  <div id="approvalsTable" class="approvals-table">
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
  </div>
  <!-- Team PTO Calendar -->
  <section class="approvals-calendar" aria-label="Team PTO Calendar">
    <header class="cal-head">
      <h3 class="cal-title">Team PTO Calendar</h3>
      <div class="cal-controls" role="group" aria-label="Calendar navigation">
        <button id="calPrev" class="btn cal-nav" type="button" aria-label="Previous month">‚Äπ</button>
        <div id="calMonthLabel" class="cal-month">‚Äî</div>
        <button id="calNext" class="btn cal-nav" type="button" aria-label="Next month">‚Ä∫</button>
      </div>
    </header>

    <div id="calLegend" class="cal-legend" aria-label="People color legend"></div>

    <div class="pto-cal-wrap">
      <div class="pto-cal-head" aria-hidden="true">
        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
      </div>
      <div id="approvalsCalendar" class="pto-cal" role="grid" aria-live="polite"></div>
      <div id="calTooltip" class="cal-tooltip" aria-hidden="true"></div>
    </div>
  </section>
  <!-- Hist√≥rico: aprobados / rechazados -->
  <section class="approvals-history" aria-label="Processed PTO requests">
    <header class="approvals-history-head">
      <h3 class="approvals-history-title">Approved & Rejected</h3>
      <p class="approvals-history-sub">Recently processed PTO requests from your team.</p>
    </header>

      <div id="approvalsHistoryTable" class="approvals-table">
        <div class="skeleton-row"></div>
        <div class="skeleton-row"></div>
      </div>
    </section>

    <footer class="approvals-foot">
      <span id="approvalsToast" class="toast" role="status" aria-live="polite"></span>
    </footer>
  </section>
  <footer class="approvals-foot">
    <span id="approvalsToast" class="toast" role="status" aria-live="polite"></span>
  </footer>
</section>

<section class="panel" id="panel-admin" role="tabpanel" aria-labelledby="tab-admin" hidden>
  <div class="admin-card">
    <header class="admin-card__head">
      <div>
        <p class="eyebrow">Access manager</p>
        <h2 class="admin-card__title">Invite teammates to Vintti Hub</h2>
        <p class="admin-card__sub">Create a profile, choose if it should be active, and optionally send the password setup email.</p>
      </div>
      <span class="admin-chip">Admins only</span>
    </header>

    <form id="adminCreateForm" class="admin-form">
      <div class="grid">
        <label class="field">
          <span class="label">Full name</span>
          <input id="adminFullName" name="full_name" placeholder="Alex Recruiter" required />
        </label>
        <label class="field">
          <span class="label">Email</span>
          <input id="adminEmail" name="email" type="email" placeholder="name@vintti.com" required />
        </label>
        <label class="field field-span">
          <span class="label">Role (optional)</span>
          <input id="adminRole" name="role" placeholder="e.g. Recruiter" />
        </label>
        <label class="field field-span">
          <span class="label">Leader</span>
          <input id="adminLeaderInput" name="leader_display" placeholder="Start typing a name" list="adminLeaderOptions" autocomplete="off" />
          <input type="hidden" id="adminLeaderUserId" name="leader_user_id" />
          <datalist id="adminLeaderOptions"></datalist>
        </label>
        <label class="field field-span">
          <span class="label">Leads (optional)</span>
          <div class="admin-multiselect" id="adminLeaderOfBox">
            <div id="adminLeaderOfTags" class="admin-multiselect__tags" aria-live="polite"></div>
            <input id="adminLeaderOfInput" name="leader_of_display" placeholder="Type a teammate name" list="adminLeaderOptions" autocomplete="off" />
          </div>
          <input type="hidden" id="adminLeaderOfUserIds" name="leader_of_user_ids" />
        </label>
      </div>

      <div class="admin-form__toggles">
        <label class="toggle" hidden aria-hidden="true" style="display:none;">
          <input type="checkbox" id="adminActive" checked />
          <span>Active immediately</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="adminIsRecruiter" />
          <span>Recruiter / HR Lead</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="adminIsSalesLead" />
          <span>Sales Lead</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="adminSendInvite" checked />
          <span>Send invite email</span>
        </label>
      </div>

      <div class="admin-foot">
        <button type="submit" class="btn primary">Create user</button>
        <span id="adminStatus" class="toast" role="status" aria-live="polite"></span>
      </div>
    </form>
  </div>
</section>

  </main>
  <!-- ‚Äî‚Äî‚Äî Modal: Quick Profile ‚Äî‚Äî‚Äî -->
<div id="userQuickModal" class="modal" aria-hidden="true">
  <div class="modal__backdrop" data-close-modal></div>
  <div class="modal__dialog quick-card" role="dialog" aria-modal="true" aria-labelledby="userQuickTitle">
    <header class="modal__head">
      <h3 id="userQuickTitle">Team Member</h3>
      <button class="modal__close" title="Close" data-close-modal>√ó</button>
    </header>

    <div class="quick-body">
      <div class="quick-avatar">
        <img id="uqAvatarImg" alt="User avatar" />
        <span id="uqAvatarInitials" aria-hidden="true"></span>
      </div>

      <div class="quick-main">
        <div class="quick-name" id="uqName">‚Äî</div>
        <div class="quick-meta">
          <span id="uqEmail">‚Äî</span>
          <span class="dot">‚Ä¢</span>
          <span id="uqRole">‚Äî</span>
          <span class="dot">‚Ä¢</span>
          <span id="uqTeam">‚Äî</span>
        </div>

        <div class="quick-grid">
          <div class="qfield"><span class="label">Emergency</span><span id="uqEmergency">‚Äî</span></div>
          <div class="qfield"><span class="label">Birth</span><span id="uqBirth">‚Äî</span></div>
          <div class="qfield"><span class="label">Start</span><span id="uqStart">‚Äî</span></div>
        </div>

        <div class="quick-totals">
          <div class="qkpi">
            <span class="badge-soft badge--vac">Vacation</span>
            <div class="value" id="uqVacTotal">0</div>
            <div class="caption">Total</div>
          </div>
          <div class="qkpi">
            <span class="badge-soft badge--vd">Vintti Days</span>
            <div class="value" id="uqVdTotal">0</div>
            <div class="caption">Total</div>
          </div>
          <div class="qkpi">
            <span class="badge-soft badge--hol">Public Holidays</span>
            <div class="value" id="uqHolTotal">0</div>
            <div class="caption">Total</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="requestsToast" class="requests-toast" aria-live="polite"></div>

<script src="./assets/js/main.js" defer></script>
<script src="./assets/js/profile.js" defer></script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>My Profile ‚Ä¢ Vintti Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="./assets/css/profile.css" rel="stylesheet" />
</head>
<body>
  <main class="page">
    <!-- Header + Tabs -->
    <header class="header">
      <h1 class="title">My Profile</h1>
        <nav class="tabs" id="tabsBar" role="tablist" aria-label="Profile tabs">
          <button class="tab active" data-tab="profile" aria-selected="true">Profile</button>
          <button class="tab" data-tab="timeoff" aria-selected="false">Request Time Off</button>
        </nav>
    </header>

    <!-- Avatar -->
    <section class="avatar-wrap">
      <div class="avatar" id="avatar">
        <img id="avatarImg" alt="User avatar" />
        <span id="avatarInitials" aria-hidden="true"></span>
      </div>
    </section>

    <!-- Panels -->
    <section class="panel active" id="panel-profile" role="tabpanel" aria-labelledby="tab-profile">
      <form id="profileForm" class="form">
        <div class="grid">
          <label class="field">
            <span class="label">Full Name</span>
            <input name="user_name" id="user_name" placeholder="Full Name" />
          </label>

          <label class="field">
            <span class="label">Vintti Email</span>
            <input name="email_vintti" id="email_vintti" type="email" placeholder="name@vintti.com" />
          </label>

          <label class="field">
            <span class="label">Role</span>
            <input name="role" id="role" placeholder="Role" />
          </label>

          <label class="field">
            <span class="label">Emergency Contact</span>
            <input name="emergency_contact" id="emergency_contact" placeholder="+57 300 000 0000 ‚Äî Contact Name" />
          </label>

          <label class="field">
            <span class="label">Vintti Start Date</span>
            <input name="ingreso_vintti_date" id="ingreso_vintti_date" type="date" />
          </label>

          <label class="field">
            <span class="label">Date of Birth</span>
            <input name="fecha_nacimiento" id="fecha_nacimiento" type="date" />
          </label>
        </div>

        <div class="actions">
          <button type="submit" class="btn primary">Save Changes</button>
          <span id="profileToast" class="toast" role="status" aria-live="polite"></span>
        </div>
      </form>
    </section>

    <section class="panel" id="panel-timeoff" role="tabpanel" aria-labelledby="tab-timeoff" hidden>
      <!-- ‚Äî‚Äî‚Äî Time Off Balances (read-only) ‚Äî‚Äî‚Äî -->
      <section class="balances" aria-label="Time Off Balances">
        <header class="balances-head">
          <h2 class="balances-title">Time Off Balances</h2>
          <span class="balances-caption">Read-only</span>
        </header>

        <div class="balances-table" id="balancesTable">
          <!-- Filled by JS: loadBalances(uid) -->
          <div class="skeleton-row"></div>
          <div class="skeleton-row"></div>
          <div class="skeleton-row"></div>
        </div>
      </section>
      <section class="requests">
  <header class="requests-head">
    <h2 class="list-title">My Requests</h2>
    <div class="legend">
      <span class="badge-soft badge--vac">Vacation</span>
      <span class="badge-soft badge--hol">Holiday</span>
      <span class="badge-soft badge--vd">Vintti Day</span>
    </div>
  </header>

  <div id="requestsTable" class="requests-table">
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
  </div>
</section>

      <div class="list">
<div class="timeoff-actions">
  <button id="btnOpenTimeoff" class="btn fun">
    Take a Break üå¥
  </button>
</div>

<!-- ‚Äî‚Äî‚Äî Modal: Request Time Off ‚Äî‚Äî‚Äî -->
<div id="timeoffModal" class="modal" aria-hidden="true">
  <div class="modal__backdrop" data-close-modal></div>
  <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="timeoffTitle">
    <header class="modal__head">
      <h3 id="timeoffTitle">Request Time Off</h3>
      <button class="modal__close" title="Close" data-close-modal>√ó</button>
    </header>

    <form id="timeoffForm" class="form">
      <div class="grid">
        <label class="field">
          <span class="label">Type</span>
          <select id="kind" required>
            <option value="vacation">Vacation</option>
            <option value="holiday">Holiday</option>
            <option value="vintti_day">Vintti Day</option>
          </select>
        </label>

        <label class="field">
          <span class="label">Start</span>
          <input id="start_date" type="date" required />
        </label>

        <label class="field">
          <span class="label">End</span>
          <input id="end_date" type="date" required />
        </label>

        <label class="field" style="grid-column:1/-1;">
          <span class="label">Note (optional)</span>
          <textarea id="reason" rows="3" placeholder="Family plan, medical appointment, etc."></textarea>
        </label>
      </div>

      <div class="actions">
        <button type="submit" class="btn primary">Send Request ‚úàÔ∏è</button>
        <button type="button" class="btn" data-close-modal>Cancel</button>
        <span id="timeoffToast" class="toast" role="status" aria-live="polite"></span>
      </div>
    </form>
  </div>
</div>

<!-- ‚Äî‚Äî‚Äî Success Splash (auto hides) ‚Äî‚Äî‚Äî -->
<div id="timeoffCongrats" class="splash" aria-hidden="true">
  <div class="splash__card">
    <div class="splash__emoji" aria-hidden="true">üèñÔ∏è</div>
    <h3>Request sent!</h3>
    <p>You deserve a rest. We‚Äôll notify your lead üíå</p>
  </div>
</div>

      </div>
    </section>
<section class="panel" id="panel-teampto" role="tabpanel" aria-labelledby="tab-teampto" hidden>
  <header class="teampto-head">
    <h2 class="teampto-title">Team PTO</h2>
    <span class="teampto-caption">Read-only</span>
  </header>

  <div id="teamPtoTable" class="teampto-table">
    <!-- Filled by JS -->
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
  </div>
</section>
<!-- ===== Approvals (leaders only) ===== -->
<section class="panel" id="panel-approvals" role="tabpanel" aria-labelledby="tab-approvals" hidden>
  <header class="approvals-head">
    <h2 class="approvals-title">Approvals</h2>
    <div class="team-pill" id="approvalsTeamPill" hidden>
      Team: <b id="approvalsTeamName"></b>
    </div>
  </header>

  <div id="approvalsTable" class="approvals-table">
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
    <div class="skeleton-row"></div>
  </div>
  <!-- Team PTO Calendar -->
  <section class="approvals-calendar" aria-label="Team PTO Calendar">
    <header class="cal-head">
      <h3 class="cal-title">Team PTO Calendar</h3>
      <div class="cal-controls" role="group" aria-label="Calendar navigation">
        <button id="calPrev" class="btn cal-nav" type="button" aria-label="Previous month">‚Äπ</button>
        <div id="calMonthLabel" class="cal-month">‚Äî</div>
        <button id="calNext" class="btn cal-nav" type="button" aria-label="Next month">‚Ä∫</button>
      </div>
    </header>

    <div id="calLegend" class="cal-legend" aria-label="People color legend"></div>

    <div class="pto-cal-wrap">
      <div class="pto-cal-head" aria-hidden="true">
        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
      </div>
      <div id="approvalsCalendar" class="pto-cal" role="grid" aria-live="polite"></div>
      <div id="calTooltip" class="cal-tooltip" aria-hidden="true"></div>
    </div>
  </section>

  <footer class="approvals-foot">
    <span id="approvalsToast" class="toast" role="status" aria-live="polite"></span>
  </footer>
</section>

  </main>
  <!-- ‚Äî‚Äî‚Äî Modal: Quick Profile ‚Äî‚Äî‚Äî -->
<div id="userQuickModal" class="modal" aria-hidden="true">
  <div class="modal__backdrop" data-close-modal></div>
  <div class="modal__dialog quick-card" role="dialog" aria-modal="true" aria-labelledby="userQuickTitle">
    <header class="modal__head">
      <h3 id="userQuickTitle">Team Member</h3>
      <button class="modal__close" title="Close" data-close-modal>√ó</button>
    </header>

    <div class="quick-body">
      <div class="quick-avatar">
        <img id="uqAvatarImg" alt="User avatar" />
        <span id="uqAvatarInitials" aria-hidden="true"></span>
      </div>

      <div class="quick-main">
        <div class="quick-name" id="uqName">‚Äî</div>
        <div class="quick-meta">
          <span id="uqEmail">‚Äî</span>
          <span class="dot">‚Ä¢</span>
          <span id="uqRole">‚Äî</span>
          <span class="dot">‚Ä¢</span>
          <span id="uqTeam">‚Äî</span>
        </div>

        <div class="quick-grid">
          <div class="qfield"><span class="label">Emergency</span><span id="uqEmergency">‚Äî</span></div>
          <div class="qfield"><span class="label">Birth</span><span id="uqBirth">‚Äî</span></div>
          <div class="qfield"><span class="label">Start</span><span id="uqStart">‚Äî</span></div>
        </div>

        <div class="quick-totals">
          <div class="qkpi">
            <span class="badge-soft badge--vac">Vacation</span>
            <div class="value" id="uqVacTotal">0</div>
            <div class="caption">Total</div>
          </div>
          <div class="qkpi">
            <span class="badge-soft badge--vd">Vintti Days</span>
            <div class="value" id="uqVdTotal">0</div>
            <div class="caption">Total</div>
          </div>
          <div class="qkpi">
            <span class="badge-soft badge--hol">Holiday</span>
            <div class="value" id="uqHolTotal">0</div>
            <div class="caption">Total</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="./assets/js/main.js" defer></script>
<script src="./assets/js/profile.js" defer></script>
</body>
</html>

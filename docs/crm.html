<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===== Meta ===== -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CRM</title>
  <meta name="theme-color" content="#0B3D91">

  <!-- ===== Favicons / PWA ===== -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/icons/vintti-hub-180.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#0B3D91">

  <!-- ===== Fonts (Onest) ===== -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;600&display=swap" rel="stylesheet">

  <!-- ===== Vendor CSS (DataTables) ===== -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

  <!-- ===== App CSS (scoped) ===== -->
  <link rel="stylesheet" href="./assets/css/crm.css" />
</head>

<body>
  <!-- ====================== SIDEBAR ====================== -->
<aside class="sidebar">
  <img src="./assets/img/vintti_logo.png" alt="Vintti Logo" class="logo" />

  <nav class="sidebar-nav">
    <!-- SecciÃ³n 1: Core -->
    <p class="sidebar-section-label">CORE</p>

    <a class="menu-item" href="candidates.html">
      <span class="menu-icon"><i class="fa-solid fa-user-group"></i></span>
      <span class="menu-label">Candidates</span>
    </a>

    <a class="menu-item active" href="crm.html">
      <span class="menu-icon"><i class="fa-solid fa-building"></i></span>
      <span class="menu-label">CRM</span>
    </a>

    <a class="menu-item" href="opportunities.html">
      <span class="menu-icon"><i class="fa-solid fa-chart-line"></i></span>
      <span class="menu-label">Opportunities</span>
    </a>

    <a class="menu-item" id="candidateSearchLink" href="candidate-search.html" style="display:none;">
      <span class="menu-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
      <span class="menu-label">Candidate Search</span>
    </a>

    <a class="menu-item" href="equipments.html" id="equipmentsLink">
      <span class="menu-icon"><i class="fa-solid fa-laptop"></i></span>
      <span class="menu-label">Equipments</span>
    </a>

    <!-- SecciÃ³n 2: Insights -->
    <p class="sidebar-section-label">INSIGHTS</p>

    <a class="menu-item" id="summaryLink" href="opportunities-summary.html" style="display:none;">
      <span class="menu-icon"><i class="fa-solid fa-chart-column"></i></span>
      <span class="menu-label">Opportunities Summary</span>
    </a>

    <a
      class="menu-item"
      id="dashboardLink"
      href="https://dashboard.vintti.com/public/dashboard/a6d74a9c-7ffb-4bec-b202-b26cdb57ff84?meses=3&metric_arpa=&metrica=revenue&tab=5-growth-%26-revenue"
      target="_blank"
      rel="noopener"
    >
      <span class="menu-icon"><i class="fa-solid fa-gauge-high"></i></span>
      <span class="menu-label">Dashboard</span>
    </a>

    <a class="menu-item" href="control-dashboard.html" id="managementMetricsLink">
      <span class="menu-icon"><i class="fa-solid fa-chart-bar"></i></span>
      <span class="menu-label">Management Metrics</span>
    </a>

    <a class="menu-item" id="recruiterPowerLink" href="recruiter-power.html" style="display:none;">
      <span class="menu-icon"><i class="fa-solid fa-bolt"></i></span>
      <span class="menu-label">Recruiter Power</span>
    </a>
    <a
      class="menu-item"
      id="salesLink"
      href="https://dashboard.vintti.com/public/dashboard/8e7a1373-cfc1-4549-81da-24566d81c9d3?month_ndacw=&month_ndas="
      target="_blank"
      rel="noopener"
    >
      <span class="menu-icon"><i class="fa-solid fa-rocket"></i></span>
      <span class="menu-label">Sales Force</span>
    </a>
  </nav>

  <!-- Profile tile SIEMPRE pegado abajo -->
  <a href="profile.html" class="profile-tile" id="sidebarProfile">
    <span class="profile-avatar">
      <img id="profileAvatarImg" alt="" />
      <span id="profileAvatarInitials" class="profile-initials" aria-hidden="true">â€”</span>
    </span>
    <span class="profile-meta">
      <span id="profileName" class="profile-name">-</span>
      <span id="profileEmail" class="profile-email"></span>
    </span>
  </a>
</aside>

  <!-- Sidebar wow toggle (kept ids/classes) -->
  <div class="sidebar-wow-toggle" id="sidebarToggle" role="button" aria-label="Toggle sidebar" tabindex="0">
    <i class="fa-solid fa-chevron-left" id="sidebarToggleIcon" aria-hidden="true"></i>
  </div>

  <!-- ====================== MAIN ====================== -->
  <div class="main-content">
    <!-- Top bar: title + primary action -->
    <header class="page-header">
      <h1 class="page-title">CRM</h1>
      <button class="new-btn" onclick="openPopup()">New</button>
    </header>

    <!-- Controls: page length (DataTables) + client search -->
    <div class="crm-controls-bar">
      <div id="datatable-length-container" aria-live="polite"></div>
      <input
        type="text"
        id="searchClientInput"
        placeholder="Search by Client Name"
        class="crm-search-input"
        inputmode="search"
        aria-label="Search by Client Name"
      />
    </div>

    <!-- Accounts table (DataTables enhances this) -->
    <table id="accountTable">
      <thead>
        <tr>
          <th>Client Name</th>
          <th>Status</th>
          <th>Sales Lead</th>
          <th>Contract</th>
          <th>TRR</th>
          <th>TSF</th>
          <th>TSR</th>
        </tr>
      </thead>
      <tbody id="accountTableBody"><!-- rows rendered by JS --></tbody>
    </table>
  </div>

  <!-- ====================== POPUP (Create Account) ====================== -->
  <div id="popup" class="popup-overlay" aria-hidden="true">
    <div class="popup-content" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
      <span class="close-btn" onclick="closePopup()" aria-label="Close">&times;</span>
      <h2 class="popup-title" id="popupTitle">New Account</h2>
        <form class="popup-form two-columns">
          <!-- Company Name -->
          <div class="popup-field">
            <label>Company Name</label>
            <input type="text" name="name" placeholder="Account name" />
          </div>
          <!-- Contact Name + Surname en una sola fila -->
          <div class="popup-field full popup-inline">
            <div class="inline-group">
              <div class="field-half">
                <label>Name</label>
                <input type="text" name="contact_name" placeholder="Name" />
              </div>
              <div class="field-half">
                <label>Surname</label>
                <input type="text" name="contact_surname" placeholder="Surname" />
              </div>
            </div>
          </div>

          <!-- ðŸ†• Industry -->
          <div class="popup-field">
            <label>Industry</label>
            <input type="text" name="industry" placeholder="e.g. Fintech, SaaS, E-commerce" />
          </div>

          <!-- Size -->
          <div class="popup-field">
            <label>Size</label>
            <select name="size">
              <option value="1-10">1-10</option>
              <option value="11-50">11-50</option>
              <option value="51-200">51-200</option>
              <option value="201-500">201-500</option>
              <option value="+500">+500</option>
            </select>
          </div>

          <!-- Timezone -->
          <div class="popup-field">
            <label>Timezone</label>
            <select name="timezone">
              <option>EST</option>
              <option>CST</option>
              <option>PST</option>
              <option>MST</option>
              <option>AST</option>
              <option>HST</option>
            </select>
          </div>

          <!-- State -->
          <div class="popup-field">
            <label>State</label>
            <select name="state">
              <option>Alabama</option>
              <option>Alaska</option>
              <option>Arizona</option>
              <option>Arkansas</option>
              <option>California</option>
              <option>Colorado</option>
              <option>Connecticut</option>
              <option>Delaware</option>
              <option>Florida</option>
              <option>Georgia</option>
              <option>Hawaii</option>
              <option>Idaho</option>
              <option>Illinois</option>
              <option>Indiana</option>
              <option>Iowa</option>
              <option>Kansas</option>
              <option>Kentucky</option>
              <option>Louisiana</option>
              <option>Maine</option>
              <option>Maryland</option>
              <option>Massachusetts</option>
              <option>Michigan</option>
              <option>Minnesota</option>
              <option>Mississippi</option>
              <option>Missouri</option>
              <option>Montana</option>
              <option>Nebraska</option>
              <option>Nevada</option>
              <option>New Hampshire</option>
              <option>New Jersey</option>
              <option>New Mexico</option>
              <option>New York</option>
              <option>North Carolina</option>
              <option>North Dakota</option>
              <option>Ohio</option>
              <option>Oklahoma</option>
              <option>Oregon</option>
              <option>Pennsylvania</option>
              <option>Rhode Island</option>
              <option>South Carolina</option>
              <option>South Dakota</option>
              <option>Tennessee</option>
              <option>Texas</option>
              <option>Utah</option>
              <option>Vermont</option>
              <option>Virginia</option>
              <option>Washington</option>
              <option>West Virginia</option>
              <option>Wisconsin</option>
              <option>Wyoming</option>
              <option>Other</option>
            </select>
          </div>

          <!-- Website -->
          <div class="popup-field">
            <label>Website</label>
            <input type="text" name="website" placeholder="e.g. example.com" />
          </div>

          <!-- Email -->
          <div class="popup-field">
            <label>Email</label>
            <input type="email" name="mail" placeholder="e.g. hello@company.com" />
          </div>

          <!-- LinkedIn -->
          <div class="popup-field">
            <label>LinkedIn</label>
            <input type="text" name="linkedin" placeholder="LinkedIn URL" />
          </div>

          <!-- Lead source -->
          <div class="popup-field">
            <label>Lead source</label>
            <select name="where_come_from" required>
              <option value="" disabled selected>Select source</option>
              <option>SEO</option>
              <option>AI</option>
              <option>Slack Community</option>
              <option>Referral</option>
              <option>Re-target</option>
              <option>Outbound</option>
              <option>Linkedin - Agus</option>
            </select>
          </div>

          <!-- Referral source (shown only when Lead source = Referral) -->
          <div class="popup-field" id="referralSourceWrapper" style="display:none">
            <label>Referral â€“ Client</label>
            <input
              type="text"
              name="referal_source"
              id="referralSourceInput"
              placeholder="Type to search clientsâ€¦"
              list="referralList"
              autocomplete="off"
            />
            <datalist id="referralList"></datalist>
            <small class="muted">Choose the client who referred this account.</small>
          </div>

          <!-- ðŸ†• Outsource before (boolean) -->
          <div class="popup-field">
            <label>Outsource before</label>
            <select name="outsource">
              <option value="">Selectâ€¦</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </div>

          <!-- ðŸ†• Pain point -->
          <div class="popup-field">
            <label>Pain point</label>
            <select name="pain_points">
              <option value="na">NA</option>
              <option value="high salary">High salary</option>
              <option value="no real pain point">No real pain point</option>
              <option value="cultural">Cultural</option>
              <option value="time zone">Time zone</option>
              <option value="knowledge">Knowledge</option>
              <option value="no time">No time</option>
            </select>
          </div>

          <!-- ðŸ†• Position -->
          <div class="popup-field">
            <label>Position</label>
            <select name="position">
              <option value="">Selectâ€¦</option>
              <option>Founder/Co-Founder</option>
              <option>President</option>
              <option>Vice President</option>
              <option>CEO</option>
              <option>COO</option>
              <option>CFO/Finance Manager</option>
              <option>CTO</option>
              <option>General Manager</option>
              <option>Hiring Manager</option>
              <option>Talent Acquisition/Recruiter</option>
              <option>Student/Freelancer</option>
              <option>Unemployed</option>
              <option>Other</option>
              <option>Unknown</option>
            </select>
          </div>

          <!-- ðŸ†• Type -->
          <div class="popup-field">
            <label>Type</label>
            <select name="type">
              <option value="NA">NA</option>
              <option value="Firm">Firm</option>
              <option value="SMB">SMB</option>
              <option value="Startup">Startup</option>
            </select>
          </div>

          <!-- About -->
          <div class="popup-field full">
            <label>About</label>
            <textarea name="about" placeholder="Write a description..."></textarea>
          </div>

          <button type="submit" class="create-btn">Create</button>
        </form>
    </div>
  </div>

  <!-- ====================== SORT TOAST ====================== -->
  <div
    id="crmSortToast"
    class="sort-toast"
    role="status"
    aria-live="polite"
    style="display:none"
  >
    <div class="sort-toast__content">
      <div class="sort-toast__header">
        <span class="sort-toast__dot"></span>
        <span>Prepping the cutest view â€” sorting the table by <b>Status</b>â€¦</span>
      </div>

      <div
        class="sort-toast__progress"
        role="progressbar"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow="0"
      >
        <div class="sort-toast__bar" style="width:0%"></div>
      </div>

      <div class="sort-toast__meta">
        <span id="sortToastPercent">0%</span>
      </div>
    </div>
  </div>
  <!-- BotÃ³n flotante de Log out -->
 <button type="button" class="logout-fab" id="logoutFab">
    <i class="fa-solid fa-right-from-bracket" aria-hidden="true"></i>
    <span>Log out</span>
  </button>
  <!-- ====================== SCRIPTS ====================== -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <script src="./assets/js/crm.js"></script>
</body>
</html>
